<div class="card-list-container scroll-list jscroll">
  <% parks.each do |park| %>
  <article class="card mx-auto mt-1 shadow-lg">

    <h2 class="m-3"><%= link_to park.name, park, data: {"turbolinks" => false} %></h2>
    <%= image_tag park.get_image(500,500), class:"card-img-top"; %>

    <div class="card-body">
      <div class="row">

        <div class="col-2">
          <%= link_to(park.end_user) do %>
            <%= image_tag park.end_user.get_profile_image(100,100), class:"prf-img mt-2 rounded-circle" %></br>
          <% end %>
        </div>

        <div class="col-10">
          <p class="card-title"><%= park.end_user.name %></p>
          <p class="card-title"><%= park.address %></p>
          <p class="card-title"><%= park.introduction %></p>
          <p class="card-title">
            <% park.tags.each do |tag| %>
              <%= tag.name %>
            <% end %>
          </p>
        </div>

      </div>
    </div>

  </article>
  <% end %>
  <%= paginate parks %>
</div>

<script>
  $(window).on('scroll', function() {
  scrollHeight = $(document).height();
  scrollPosition = $(window).height() + $(window).scrollTop();
  if ( (scrollHeight - scrollPosition) / scrollHeight <= 0.05) {
    $('.jscroll').jscroll({
      contentSelector: '.scroll-list',
      nextSelector: 'span.next:last a'
    });
  }
});
</script>
